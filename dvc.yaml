stages:
  build_corpus:
    cmd: python src/stages/build_corpus.py data/raw/example_context.txt data/processed/corpus.pkl
    deps:
      - src/stages/build_corpus.py
      - data/raw/example_context.txt
    outs:
      - data/processed/corpus.pkl

  build_embedder: #https://huggingface.co/sentence-transformers/msmarco-distilbert-base-tas-b
    cmd: python src/stages/build_embedder.py "msmarco-distilbert-base-tas-b" data/processed/distilbert-base-tas-b-embedder.pkl
    deps:
      - src/stages/build_embedder.py
    outs:
      - data/processed/distilbert-base-tas-b-embedder.pkl

  build_vectorstore:
    cmd: python src/stages/build_vectorstore.py data/processed/corpus.pkl data/processed/distilbert-base-tas-b-embedder.pkl data/processed/chroma.db
    deps:
      - src/stages/build_vectorstore.py
      - data/processed/corpus.pkl
      - data/processed/distilbert-base-tas-b-embedder.pkl
    outs:
      - data/processed/chroma.db

  load_vectorstore:
    cmd: python src/stages/load_vectorstore.py data/processed/chroma.db data/processed/distilbert-base-tas-b-embedder.pkl "FÃ¼r was steht Maschinelles Lernen?"
    deps:
      - src/stages/load_vectorstore.py
      - data/processed/chroma.db
      - data/processed/distilbert-base-tas-b-embedder.pkl 